# 删除软链接
rm ./bin  (not rm ./bin/)

# 后台转前台
jobs
fg %1

# 光标移动
ctrl+左右键:在单词之间跳转
ctrl+a:跳到本行的行首
ctrl+e:跳到页尾

#
yum -y install lrzsz

# 将目录添加进入环境变量
echo "export PATH=/home/cqh:$PATH" >> /etc/profile
echo "export PATH=/monchickey/ffmpeg/bin:$PATH" >> /etc/profile

source /etc/profile

# 设置时区
# timedatectl list-timezones |grep Shanghai    #查找中国时区的完整名称
Asia/Shanghai
# timedatectl set-timezone Asia/Shanghai    #其他时区以此类推
# ln -sf /usr/share/zoneinfo/Asia/Tokyo /etc/localtime
Asia/Tokyo

# mysql
ALTER USER 'root'@'localhost' IDENTIFIED BY 'AJnMyYu756Gix7h6'
SET PASSWORD FOR 'root'@'localhost' = PASSWORD('AJnMyYu756Gix7h6');
drop user 'G_USER'@%'; 

# setup Nginx
wget -c https://nginx.org/download/nginx-1.16.0.tar.gz

# setup php
# wget http://ar2.php.net/distributions/php-7.2.18.tar.gz
/configure  -enable-fpm
yum install libxml2-devel

# setup phpize
yum install php-devel
下载解压php5.3.3 源码
cd /home/soft/php-5.3.3/ext/shmop
./configure --with-php-config=/usr/bin/php-config
ipcs -m //查看共享内存

# 部署web服务器
# 更换源
yum install epel-release
修改文件“/etc/yum.repos.d/epel.repo”， 将baseurl的注释取消， mirrorlist注释掉

# yum 安装web服务器
sudo yum install mysql.x86_64
sudo yum install nginx.x86_64
sudo yum install php.x86_64
sudo yum install php-redis.x86_64
sudo yum install redis.x86_64
sudo yum install mysql-server.x86_64
sudo yum install php-fpm.x86_64
sudo yum install php-mysql.x86_64 

# log
# 解析php错误
/var/log/php-fpm www-error.log


# 数据库
service mysqld start
mysql
create database chat;
CREATE USER 'loc'@'127.0.0.1' IDENTIFIED BY '123qwe';
grant all privileges on slg.* to 'loc'@127.0.0.1 identified by '123qwe';
flush privileges;


# 配置
# 启动redis
cd /etc/
cp /etc/redis.conf redis_web.conf
redis-server redis_web.conf &

# cd /etc
# cp php-fpm.conf.default php-fpm.conf
# /etc/php-fpm.d/*.conf
service php-fpm start


# 配置nginx
/usr/share/nginx/html
cd /etc/nginx/
mv nginx.conf.default nginx.conf
修改配置 打开
location ~ \.php$ {
                    root /usr/share/nginx/html; #指定php的根目录
                    fastcgi_pass 127.0.0.1:9000;#php-fpm的默认端口是9000
                    fastcgi_index index.php;
                    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
                    include fastcgi_params;
            }

nginx -c /etc/nginx/nginx.conf
nginx -s reload


# 分区
fdisk -l 	// 查看
fdisk /dev/hdd1  // 分区某一块
step:
	n (create)
	p 1 (磁盘号)
	enter 起始位置 default
	+size G (+250G/+150G/100G)
	w Save

mkfs.ext4 	
// 格式化分区
mkfs.ext4 /vdb1
mkfs.ext4 /vdb2
mkfs.ext4 /vdb3

mount /dev/hdd1 /hdd1  // 挂载
# create file above /home

mount /dev/sdb1  /GameServer/
mount /dev/sdb2  /MYSQLDATA/
mount /dev/sdb3  /REDISDATA/

# mysql 配置
groupadd mysql     //创建mysql组
useradd -g mysql mysql //创建mysql用户添加到mysql组
mkdir -p /MYSQLDATA/mysql/data
mkdir -p /MYSQLDATA/mysql/binlog
chown -R mysql:mysql /MYSQLDATA/mysql
chmod -R 755 /MYSQLDATA/mysql

# service mysqld start 失败
selinux搞的鬼，设置为permissive模式之后正常启动mysqld
getenforce
setenforce 0

# 启动失败 Table 'mysql.plugin' doesn't exist
# 执行初始化脚本
./mysql_install_db --user=mysql --datadir=/MYSQLDATA/mysql/data
./mysql_install_db --user=mysql --basedir=/home/mysql5627 --datadir=/usr/mysqldata


#配置mysqld使用jemalloc，需要将配置写到[mysqld_safe] section
[mysqld_safe]
malloc-lib=/usr/lib64/libjemalloc.so.1


# 开放端口
1、开启80端口命令：
/sbin/iptables -I INPUT -p tcp --dport 80 -j ACCEPT
2、保存配置 命令：
/etc/rc.d/init.d/iptables save
3、重启服务命令 ：
/etc/rc.d/init.d/iptables restart
4、查看已经开放的端口： 
/etc/init.d/iptables status

gcore $pid 可以把进程内存导出来，man gcore 有详细说明

strace -tt -T -v -f -e trace=file -o ./strace.log -s 1024 -p 2585745

# 执行redis
cat id.loc | redis-cli -h 127.0.0.1 -p 37379

# 远程copy
scp /home/administrator/news.txt root@192.168.6.129:/etc/squid
scp /usr/local/flume_client.tar root@148.153.50.124:/usr/local

# 添加公钥
cat id_rsa.pub >> /home/game/.ssh/authorized_keys


